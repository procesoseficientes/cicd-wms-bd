CREATE TABLE [SONDA].[SWIFT_TRADE_AGREEMENT_BY_PROMO] (
    [TRADE_AGREEMENT_ID] INT          NOT NULL,
    [PROMO_ID]           INT          NOT NULL,
    [FREQUENCY]          VARCHAR (50) NOT NULL,
    [LAST_UPDATE]        DATETIME     DEFAULT (getdate()) NOT NULL,
    PRIMARY KEY CLUSTERED ([TRADE_AGREEMENT_ID] ASC, [PROMO_ID] ASC),
    FOREIGN KEY ([PROMO_ID]) REFERENCES [SONDA].[SWIFT_PROMO] ([PROMO_ID]),
    FOREIGN KEY ([TRADE_AGREEMENT_ID]) REFERENCES [SONDA].[SWIFT_TRADE_AGREEMENT] ([TRADE_AGREEMENT_ID])
);


GO
CREATE NONCLUSTERED INDEX [IN_SWIFT_TRADE_AGREEMENT_BY_PROMO_TRADE_AGREEMENT_ID]
    ON [SONDA].[SWIFT_TRADE_AGREEMENT_BY_PROMO]([TRADE_AGREEMENT_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IN_SWIFT_TRADE_AGREEMENT_BY_PROMO_PROMO_ID]
    ON [SONDA].[SWIFT_TRADE_AGREEMENT_BY_PROMO]([PROMO_ID] ASC);


GO
CREATE NONCLUSTERED INDEX [IN_SWIFT_TRADE_AGREEMENT_BY_PROMO_PROMO_ID_TRADE_AGREEMENT_ID]
    ON [SONDA].[SWIFT_TRADE_AGREEMENT_BY_PROMO]([PROMO_ID] ASC, [TRADE_AGREEMENT_ID] ASC)
    INCLUDE([FREQUENCY]);


GO
CREATE NONCLUSTERED INDEX [IN_SWIFT_TRADE_AGREEMENT_BY_PROMO_LAST_UPDATE]
    ON [SONDA].[SWIFT_TRADE_AGREEMENT_BY_PROMO]([LAST_UPDATE] ASC);

